# ecom_test

## Описание функциональности
Апи для валидации входящих данных с существующими в базе данных шаблонами.
Сервис получает входящие данные, подгатавливает их к сравнению,
получает шаблоны из базы данных, формирует на их основе модели и проводит сравнение
путем валидации входящих данных об сгенерированные модели.

###### Для запуска необходимы docker и docker-compose
###### [Инструкции по установке докера](https://docs.docker.com/engine/install/)

Склонировать репозиторий
```bash
git clone git@github.com:jingleMyBells/ecom_test.git
```

Перейти в каталог с проектом и конфигурационным файлом развертки
```bash
cd ecom_test/deploy
```

Создать .env файл
```bash
cat env_example.txt > .env
```

Запустить проект
```bash
  docker-compose up
```

## API Endpoints:
- [POST: get_form](http://localhost/get_form)
- [POST: generate](http://localhost/generate)

## Сегнерированная документация
```bash
  http://localhost/docs
```

#### Стэк
Python3.11.2, FastAPI, MongoDB, Nginx, Docker

###### Заметки:
- в силу отсутствия конкретных шаблонов документов базы данных в тз, 
исхожу из того, что наполнение базы данных не является зоной 
ответственности этого сервиса, поэтому генерирую модели динамически.
- в силу упоминания осмысленности названия полей шаблонов в ТЗ
валидаторы к полям моделей прикручиваются в том числе полагаясь на осмысленность
этих названий. в результате требования из ТЗ в текущем виде налагают ограничения
нейминга, то есть транслируются в теоретического автора документов в бд. показалось,
что в целом это соответствует букве и духу задания :)
- mongodb не запаролена сознательно.
- для удобства выведен эндпоинт генерации тестовых данных в бд (/generate),
он сгенерирует несколько шаблонов, описанные словарями в app/service/mock_data_service.py,
не является зависимостью для чего-либо.
- в корне лежит POSTMAN-коллекция ecom-test.postman_collection.json
